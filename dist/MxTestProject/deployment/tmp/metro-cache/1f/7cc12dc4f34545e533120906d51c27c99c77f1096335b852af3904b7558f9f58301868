{"dependencies":[{"name":"@babel/runtime/helpers/defineProperty","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"infoLog","data":{"isAsync":false}},{"name":"invariant","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),u=r(d[2]);function s(t,n){var u=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),u.push.apply(u,s)}return u}function o(n){for(var u=1;u<arguments.length;u++){var o=null!=arguments[u]?arguments[u]:{};u%2?s(Object(o),!0).forEach(function(u){t(n,u,o[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}r(d[3]);var c=r(d[4]),h=(function(){function t(u){var s=u.onMoreTasks;n(this,t),this._onMoreTasks=s,this._queueStack=[{tasks:[],popable:!1}]}return u(t,[{key:\"enqueue\",value:function(t){this._getCurrentQueue().push(t)}},{key:\"enqueueTasks\",value:function(t){var n=this;t.forEach(function(t){return n.enqueue(t)})}},{key:\"cancelTasks\",value:function(t){this._queueStack=this._queueStack.map(function(n){return o({},n,{tasks:n.tasks.filter(function(n){return-1===t.indexOf(n)})})}).filter(function(t,n){return t.tasks.length>0||0===n})}},{key:\"hasTasksToProcess\",value:function(){return this._getCurrentQueue().length>0}},{key:\"processNext\",value:function(){var t=this._getCurrentQueue();if(t.length){var n=t.shift();try{n.gen?this._genPromise(n):n.run?n.run():(c('function'==typeof n,'Expected Function, SimpleTask, or PromiseTask, but got:\\n'+JSON.stringify(n,null,2)),n())}catch(t){throw t.message='TaskQueue: Error with task '+(n.name||'')+': '+t.message,t}}}},{key:\"_getCurrentQueue\",value:function(){var t=this._queueStack.length-1,n=this._queueStack[t];return n.popable&&0===n.tasks.length&&this._queueStack.length>1?(this._queueStack.pop(),this._getCurrentQueue()):n.tasks}},{key:\"_genPromise\",value:function(t){var n=this;this._queueStack.push({tasks:[],popable:!1});var u=this._queueStack.length-1;t.gen().then(function(){n._queueStack[u].popable=!0,n.hasTasksToProcess()&&n._onMoreTasks()}).catch(function(n){throw n.message=\"TaskQueue: Error resolving Promise in task \"+t.name+\": \"+n.message,n}).done()}}]),t})();m.exports=h});","map":[[1,28,11,0],[1,644,13,16,"require"],[1,646,13,23,"d"],[1,648,13,23],[1,652,13,0],[1,656,14,6,"invariant"],[1,658,14,18,"require"],[1,660,14,25,"d"],[1,662,14,25],[1,666,44,6,"TaskQueue"],[1,680,52,2],[1,689,52,2,"TaskQueue"],[1,691,52,2,"_ref"],[1,694,52,56],[1,698,52,15,"onMoreTasks"],[1,700,52,56,"_ref"],[1,702,52,15,"onMoreTasks"],[1,714,52,56,"_classCallCheck"],[1,716,52,56,"this"],[1,721,52,56,"TaskQueue"],[1,724,53,4,"this"],[1,729,53,9,"_onMoreTasks"],[1,742,53,24,"onMoreTasks"],[1,744,54,4,"this"],[1,749,54,9,"_queueStack"],[1,763,54,25,"tasks"],[1,772,54,36,"popable"],[1,781,54,45],[1,827,62,10,"task"],[1,830,63,4,"this"],[1,835,63,9,"_getCurrentQueue"],[1,854,63,28,"push"],[1,859,63,33,"task"],[1,899,66,15,"tasks"],[1,902,66,41],[1,906,66,41,"_this"],[1,908,66,41,"this"],[1,913,67,4,"tasks"],[1,915,67,10,"forEach"],[1,923,67,18],[1,932,67,18,"task"],[1,935,67,22],[1,942,67,26,"_this"],[1,944,67,31,"enqueue"],[1,952,67,39,"task"],[1,993,70,14,"tasksToCancel"],[1,996,72,4,"this"],[1,1001,72,9,"_queueStack"],[1,1013,72,23,"this"],[1,1018,72,28,"_queueStack"],[1,1030,73,7,"map"],[1,1034,73,11],[1,1043,73,11,"queue"],[1,1046,73,16],[1,1053,73,16,"_objectSpread"],[1,1058,74,11,"queue"],[1,1061,75,8,"tasks"],[1,1067,75,15,"queue"],[1,1069,75,21,"tasks"],[1,1075,75,27,"filter"],[1,1082,75,34],[1,1091,75,34,"task"],[1,1094,75,38],[1,1101,75,42],[1,1105,75,42,"tasksToCancel"],[1,1107,75,56,"indexOf"],[1,1115,75,64,"task"],[1,1124,77,7,"filter"],[1,1131,77,14],[1,1140,77,15,"queue"],[1,1142,77,22,"idx"],[1,1145,77,14],[1,1152,77,30,"queue"],[1,1154,77,36,"tasks"],[1,1160,77,42,"length"],[1,1167,77,51],[1,1170,77,64],[1,1174,77,56,"idx"],[1,1222,91,4],[1,1229,91,11,"this"],[1,1234,91,16,"_getCurrentQueue"],[1,1253,91,35,"length"],[1,1260,91,44],[1,1300,98,4],[1,1304,98,10,"queue"],[1,1306,98,18,"this"],[1,1311,98,23,"_getCurrentQueue"],[1,1330,99,4],[1,1333,99,8,"queue"],[1,1335,99,14,"length"],[1,1342,99,22],[1,1343,100,6],[1,1347,100,12,"task"],[1,1349,100,19,"queue"],[1,1351,100,25,"shift"],[1,1359,101,6],[1,1363,102,12,"task"],[1,1365,102,17,"gen"],[1,1369,104,10,"this"],[1,1374,104,15,"_genPromise"],[1,1386,104,28,"task"],[1,1389,105,19,"task"],[1,1391,105,24,"run"],[1,1395,107,10,"task"],[1,1397,107,15,"run"],[1,1404,109,10,"invariant"],[1,1406,110,28],[1,1425,110,19,"task"],[1,1427,111,12],[1,1487,112,14,"JSON"],[1,1492,112,19,"stringify"],[1,1502,112,29,"task"],[1,1504,112,35],[1,1509,112,41],[1,1513,115,10,"task"],[1,1518,117,8],[1,1524,117,15,"e"],[1,1527,120,8],[1,1533,118,8,"e"],[1,1535,118,10,"message"],[1,1543,119,10],[1,1574,119,43,"task"],[1,1576,119,48,"name"],[1,1582,119,56],[1,1586,119,62],[1,1591,119,69,"e"],[1,1593,119,71,"message"],[1,1601,120,14,"e"],[1,1648,129,4],[1,1652,129,10,"stackIdx"],[1,1654,129,21,"this"],[1,1659,129,26,"_queueStack"],[1,1671,129,38,"length"],[1,1678,129,47],[1,1680,130,10,"queue"],[1,1682,130,18,"this"],[1,1687,130,23,"_queueStack"],[1,1699,130,35,"stackIdx"],[1,1702,131,4],[1,1709,132,6,"queue"],[1,1711,132,12,"popable"],[1,1720,133,29],[1,1724,133,6,"queue"],[1,1726,133,12,"tasks"],[1,1732,133,18,"length"],[1,1740,134,6,"this"],[1,1745,134,11,"_queueStack"],[1,1757,134,23,"length"],[1,1764,134,32],[1,1767,136,6,"this"],[1,1772,136,11,"_queueStack"],[1,1784,136,23,"pop"],[1,1790,142,13,"this"],[1,1795,142,18,"_getCurrentQueue"],[1,1815,144,13,"queue"],[1,1817,144,19,"tasks"],[1,1859,148,14,"task"],[1,1862,148,33],[1,1866,148,33,"_this2"],[1,1868,148,33,"this"],[1,1873,153,4,"this"],[1,1878,153,9,"_queueStack"],[1,1890,153,21,"push"],[1,1896,153,27,"tasks"],[1,1905,153,38,"popable"],[1,1914,153,47],[1,1918,154,4],[1,1922,154,10,"stackIdx"],[1,1924,154,21,"this"],[1,1929,154,26,"_queueStack"],[1,1941,154,38,"length"],[1,1948,154,47],[1,1950,157,4,"task"],[1,1952,158,7,"gen"],[1,1958,159,7,"then"],[1,1963,159,12],[1,1974,165,8,"_this2"],[1,1976,165,13,"_queueStack"],[1,1988,165,25,"stackIdx"],[1,1991,165,35,"popable"],[1,2000,165,45],[1,2002,166,8,"_this2"],[1,2004,166,13,"hasTasksToProcess"],[1,2025,166,36,"_this2"],[1,2027,166,41,"_onMoreTasks"],[1,2044,168,7,"catch"],[1,2050,168,13],[1,2059,168,13,"ex"],[1,2062,172,8],[1,2068,169,8,"ex"],[1,2070,169,11,"message"],[1,2078,169,8],[1,2124,170,10,"task"],[1,2126,170,15,"name"],[1,2131,169,8],[1,2136,171,13,"ex"],[1,2138,171,16,"message"],[1,2146,172,14,"ex"],[1,2150,174,7,"done"],[1,2167,178,0,"module"],[1,2169,178,7,"exports"],[1,2177,178,17,"TaskQueue"]]},"type":"js/module"}]}
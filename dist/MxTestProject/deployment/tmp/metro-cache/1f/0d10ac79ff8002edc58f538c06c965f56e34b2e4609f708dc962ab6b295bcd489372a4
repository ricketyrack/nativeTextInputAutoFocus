{"dependencies":[{"name":"@babel/runtime/helpers/defineProperty","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"fbjs/lib/performanceNow","data":{"isAsync":false}},{"name":"fbjs/lib/warning","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),s=r(d[2]);function l(t,n){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);n&&(l=l.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),s.push.apply(s,l)}return s}function o(n){for(var s=1;s<arguments.length;s++){var o=null!=arguments[s]?arguments[s]:{};s%2?l(Object(o),!0).forEach(function(s){t(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):l(Object(o)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(o,t))})}return n}var _=r(d[3]),h=r(d[4]),u=function t(){s(this,t),this.any_blank_count=0,this.any_blank_ms=0,this.any_blank_speed_sum=0,this.mostly_blank_count=0,this.mostly_blank_ms=0,this.pixels_blank=0,this.pixels_sampled=0,this.pixels_scrolled=0,this.total_time_spent=0,this.sample_count=0},f=[],c=10,y=null,p=(function(){function t(n){s(this,t),this._anyBlankStartTime=null,this._enabled=!1,this._info=new u,this._mostlyBlankStartTime=null,this._samplesStartTime=null,this._getFrameMetrics=n,this._enabled=(y||0)>Math.random(),this._resetData()}return n(t,null,[{key:\"addListener\",value:function(t){return h(null!==y,'Call `FillRateHelper.setSampleRate` before `addListener`.'),f.push(t),{remove:function(){f=f.filter(function(n){return t!==n})}}}},{key:\"setSampleRate\",value:function(t){y=t}},{key:\"setMinSampleCount\",value:function(t){c=t}}]),n(t,[{key:\"activate\",value:function(){this._enabled&&null==this._samplesStartTime&&(this._samplesStartTime=_())}},{key:\"deactivateAndFlush\",value:function(){if(this._enabled){var t=this._samplesStartTime;if(null!=t)if(this._info.sample_count<c)this._resetData();else{var n=_()-t,s=o({},this._info,{total_time_spent:n});f.forEach(function(t){return t(s)}),this._resetData()}}}},{key:\"computeBlankness\",value:function(t,n,s){if(!this._enabled||0===t.getItemCount(t.data)||null==this._samplesStartTime)return 0;var l=s.dOffset,o=s.offset,h=s.velocity,u=s.visibleLength;this._info.sample_count++,this._info.pixels_sampled+=Math.round(u),this._info.pixels_scrolled+=Math.round(Math.abs(l));var f=Math.round(1e3*Math.abs(h)),c=_();null!=this._anyBlankStartTime&&(this._info.any_blank_ms+=c-this._anyBlankStartTime),this._anyBlankStartTime=null,null!=this._mostlyBlankStartTime&&(this._info.mostly_blank_ms+=c-this._mostlyBlankStartTime),this._mostlyBlankStartTime=null;for(var y=0,p=n.first,b=this._getFrameMetrics(p);p<=n.last&&(!b||!b.inLayout);)b=this._getFrameMetrics(p),p++;b&&p>0&&(y=Math.min(u,Math.max(0,b.offset-o)));for(var k=0,v=n.last,S=this._getFrameMetrics(v);v>=n.first&&(!S||!S.inLayout);)S=this._getFrameMetrics(v),v--;if(S&&v<t.getItemCount(t.data)-1){var M=S.offset+S.length;k=Math.min(u,Math.max(0,o+u-M))}var O=Math.round(y+k),T=O/u;return T>0?(this._anyBlankStartTime=c,this._info.any_blank_speed_sum+=f,this._info.any_blank_count++,this._info.pixels_blank+=O,T>.5&&(this._mostlyBlankStartTime=c,this._info.mostly_blank_count++)):(f<.01||Math.abs(l)<1)&&this.deactivateAndFlush(),T}},{key:\"enabled\",value:function(){return this._enabled}},{key:\"_resetData\",value:function(){this._anyBlankStartTime=null,this._info=new u,this._mostlyBlankStartTime=null,this._samplesStartTime=null}}]),t})();m.exports=p});","map":[[1,28,11,0],[1,644,16,0],[1,648,16,6,"performanceNow"],[1,650,16,23,"require"],[1,652,16,30,"d"],[1,654,16,30],[1,658,20,6,"warning"],[1,660,20,16,"require"],[1,662,20,23,"d"],[1,664,20,23],[1,668,24,6,"Info"],[1,698,25,2,"any_blank_count"],[1,714,25,20],[1,721,26,2,"any_blank_ms"],[1,734,26,17],[1,741,27,2,"any_blank_speed_sum"],[1,761,27,24],[1,768,28,2,"mostly_blank_count"],[1,787,28,23],[1,794,29,2,"mostly_blank_ms"],[1,810,29,20],[1,817,30,2,"pixels_blank"],[1,830,30,17],[1,837,31,2,"pixels_sampled"],[1,852,31,19],[1,859,32,2,"pixels_scrolled"],[1,875,32,20],[1,882,33,2,"total_time_spent"],[1,899,33,21],[1,906,34,2,"sample_count"],[1,919,34,17],[1,922,41,4,"_listeners"],[1,927,42,4,"_minSampleCount"],[1,929,42,22],[1,932,43,4,"_sampleRate"],[1,934,43,30],[1,939,53,6,"FillRateHelper"],[1,953,82,2],[1,962,82,2,"FillRateHelper"],[1,964,82,14,"getFrameMetrics"],[1,967,82,65,"_classCallCheck"],[1,969,82,65,"this"],[1,974,82,65,"FillRateHelper"],[1,977,82,65,"this"],[1,982,54,2,"_anyBlankStartTime"],[1,1001,54,24],[1,1006,82,65,"this"],[1,1011,55,2,"_enabled"],[1,1021,55,13],[1,1023,82,65,"this"],[1,1028,57,2,"_info"],[1,1034,57,10],[1,1038,57,14,"Info"],[1,1040,82,65,"this"],[1,1045,58,2,"_mostlyBlankStartTime"],[1,1067,58,27],[1,1072,82,65,"this"],[1,1077,59,2,"_samplesStartTime"],[1,1095,59,23],[1,1100,83,4,"this"],[1,1105,83,9,"_getFrameMetrics"],[1,1122,83,28,"getFrameMetrics"],[1,1124,84,4,"this"],[1,1129,84,9,"_enabled"],[1,1139,84,21,"_sampleRate"],[1,1142,84,36],[1,1145,84,41,"Math"],[1,1150,84,46,"random"],[1,1159,85,4,"this"],[1,1164,85,9,"_resetData"],[1,1228,61,21,"callback"],[1,1231,67,4],[1,1238,62,4,"warning"],[1,1240,63,22],[1,1247,63,6,"_sampleRate"],[1,1249,64,6],[1,1310,66,4,"_listeners"],[1,1312,66,15,"push"],[1,1317,66,20,"callback"],[1,1321,68,6,"remove"],[1,1328,68,14],[1,1339,69,8,"_listeners"],[1,1341,69,21,"_listeners"],[1,1343,69,32,"filter"],[1,1350,69,39],[1,1359,69,39,"listener"],[1,1362,69,47],[1,1369,69,51,"callback"],[1,1373,69,64,"listener"],[1,1417,74,23,"sampleRate"],[1,1420,75,4,"_sampleRate"],[1,1422,75,18,"sampleRate"],[1,1466,78,27,"minSampleCount"],[1,1469,79,4,"_minSampleCount"],[1,1471,79,22,"minSampleCount"],[1,1515,89,8,"this"],[1,1520,89,13,"_enabled"],[1,1530,89,51],[1,1536,89,25,"this"],[1,1541,89,30,"_samplesStartTime"],[1,1561,91,6,"this"],[1,1566,91,11,"_samplesStartTime"],[1,1584,91,31,"performanceNow"],[1,1634,96,4],[1,1637,96,9,"this"],[1,1642,96,14,"_enabled"],[1,1651,96,4],[1,1652,99,4],[1,1656,99,10,"start"],[1,1658,99,18,"this"],[1,1663,99,23,"_samplesStartTime"],[1,1681,100,4],[1,1684,100,17],[1,1690,100,8,"start"],[1,1692,105,4],[1,1695,105,8,"this"],[1,1700,105,13,"_info"],[1,1706,105,19,"sample_count"],[1,1719,105,34,"_minSampleCount"],[1,1721,107,6,"this"],[1,1726,107,11,"_resetData"],[1,1743,105,4],[1,1744,110,4],[1,1748,110,10,"total_time_spent"],[1,1750,110,29,"performanceNow"],[1,1754,110,48,"start"],[1,1756,111,10,"info"],[1,1758,111,19,"_objectSpread"],[1,1763,112,9,"this"],[1,1768,112,14,"_info"],[1,1775,113,6,"total_time_spent"],[1,1792,113,6,"total_time_spent"],[1,1796,133,4,"_listeners"],[1,1798,133,15,"forEach"],[1,1806,133,23],[1,1815,133,23,"listener"],[1,1818,133,31],[1,1825,133,35,"listener"],[1,1827,133,44,"info"],[1,1832,134,4,"this"],[1,1837,134,9,"_resetData"],[1,1893,138,4,"props"],[1,1895,143,4,"state"],[1,1897,147,4,"scrollMetrics"],[1,1900,154,4],[1,1904,155,7,"this"],[1,1909,155,12,"_enabled"],[1,1919,156,41],[1,1923,156,6,"props"],[1,1925,156,12,"getItemCount"],[1,1938,156,25,"props"],[1,1940,156,31,"data"],[1,1947,157,32],[1,1953,157,6,"this"],[1,1958,157,11,"_samplesStartTime"],[1,1976,159,6],[1,1983,159,13],[1,1985,153,12],[1,1989,161,11,"dOffset"],[1,1991,161,55,"scrollMetrics"],[1,1993,161,11,"dOffset"],[1,2001,161,20,"offset"],[1,2003,161,55,"scrollMetrics"],[1,2005,161,20,"offset"],[1,2012,161,28,"velocity"],[1,2014,161,55,"scrollMetrics"],[1,2016,161,28,"velocity"],[1,2025,161,38,"visibleLength"],[1,2027,161,55,"scrollMetrics"],[1,2029,161,38,"visibleLength"],[1,2043,165,4,"this"],[1,2048,165,9,"_info"],[1,2054,165,15,"sample_count"],[1,2069,166,4,"this"],[1,2074,166,9,"_info"],[1,2080,166,15,"pixels_sampled"],[1,2096,166,33,"Math"],[1,2101,166,38,"round"],[1,2107,166,44,"visibleLength"],[1,2110,167,4,"this"],[1,2115,167,9,"_info"],[1,2121,167,15,"pixels_scrolled"],[1,2138,167,34,"Math"],[1,2143,167,39,"round"],[1,2149,167,45,"Math"],[1,2154,167,50,"abs"],[1,2158,167,54,"dOffset"],[1,2162,168,4],[1,2166,168,10,"scrollSpeed"],[1,2168,168,24,"Math"],[1,2173,168,29,"round"],[1,2179,168,56],[1,2183,168,35,"Math"],[1,2188,168,40,"abs"],[1,2192,168,44,"velocity"],[1,2196,171,10,"now"],[1,2198,171,16,"performanceNow"],[1,2202,172,35],[1,2208,172,8,"this"],[1,2213,172,13,"_anyBlankStartTime"],[1,2234,173,6,"this"],[1,2239,173,11,"_info"],[1,2245,173,17,"any_blank_ms"],[1,2259,173,33,"now"],[1,2261,173,39,"this"],[1,2266,173,44,"_anyBlankStartTime"],[1,2286,175,4,"this"],[1,2291,175,9,"_anyBlankStartTime"],[1,2310,175,30],[1,2315,176,38],[1,2321,176,8,"this"],[1,2326,176,13,"_mostlyBlankStartTime"],[1,2350,177,6,"this"],[1,2355,177,11,"_info"],[1,2361,177,17,"mostly_blank_ms"],[1,2378,177,36,"now"],[1,2380,177,42,"this"],[1,2385,177,47,"_mostlyBlankStartTime"],[1,2408,179,4,"this"],[1,2413,179,9,"_mostlyBlankStartTime"],[1,2435,179,33],[1,2440,184,4],[1,2444,181,4],[1,2448,181,8,"blankTop"],[1,2450,181,19],[1,2452,182,8,"first"],[1,2454,182,16,"state"],[1,2456,182,22,"first"],[1,2462,183,8,"firstFrame"],[1,2464,183,21,"this"],[1,2469,183,26,"_getFrameMetrics"],[1,2486,183,43,"first"],[1,2489,184,11,"first"],[1,2492,184,20,"state"],[1,2494,184,26,"last"],[1,2502,184,36,"firstFrame"],[1,2506,184,51,"firstFrame"],[1,2508,184,62,"inLayout"],[1,2519,185,6,"firstFrame"],[1,2521,185,19,"this"],[1,2526,185,24,"_getFrameMetrics"],[1,2543,185,41,"first"],[1,2546,186,6,"first"],[1,2550,190,8,"firstFrame"],[1,2553,190,22,"first"],[1,2555,190,30],[1,2559,191,6,"blankTop"],[1,2561,191,17,"Math"],[1,2566,191,22,"min"],[1,2570,192,8,"visibleLength"],[1,2572,193,8,"Math"],[1,2577,193,13,"max"],[1,2581,193,17],[1,2583,193,20,"firstFrame"],[1,2585,193,31,"offset"],[1,2592,193,40,"offset"],[1,2597,199,4],[1,2601,196,4],[1,2605,196,8,"blankBottom"],[1,2607,196,22],[1,2609,197,8,"last"],[1,2611,197,15,"state"],[1,2613,197,21,"last"],[1,2618,198,8,"lastFrame"],[1,2620,198,20,"this"],[1,2625,198,25,"_getFrameMetrics"],[1,2642,198,42,"last"],[1,2645,199,11,"last"],[1,2648,199,19,"state"],[1,2650,199,25,"first"],[1,2659,199,36,"lastFrame"],[1,2663,199,50,"lastFrame"],[1,2665,199,60,"inLayout"],[1,2676,200,6,"lastFrame"],[1,2678,200,18,"this"],[1,2683,200,23,"_getFrameMetrics"],[1,2700,200,40,"last"],[1,2703,201,6,"last"],[1,2707,205,4],[1,2710,205,8,"lastFrame"],[1,2713,205,21,"last"],[1,2715,205,28,"props"],[1,2717,205,34,"getItemCount"],[1,2730,205,47,"props"],[1,2732,205,53,"data"],[1,2738,205,61],[1,2740,205,64],[1,2741,206,6],[1,2745,206,12,"bottomEdge"],[1,2747,206,25,"lastFrame"],[1,2749,206,35,"offset"],[1,2756,206,44,"lastFrame"],[1,2758,206,54,"length"],[1,2765,207,6,"blankBottom"],[1,2767,207,20,"Math"],[1,2772,207,25,"min"],[1,2776,208,8,"visibleLength"],[1,2778,209,8,"Math"],[1,2783,209,13,"max"],[1,2787,209,17],[1,2789,209,20,"offset"],[1,2791,209,29,"visibleLength"],[1,2793,209,45,"bottomEdge"],[1,2797,212,4],[1,2801,212,10,"pixels_blank"],[1,2803,212,25,"Math"],[1,2808,212,30,"round"],[1,2814,212,36,"blankTop"],[1,2816,212,47,"blankBottom"],[1,2819,213,10,"blankness"],[1,2821,213,22,"pixels_blank"],[1,2823,213,37,"visibleLength"],[1,2825,226,4],[1,2832,214,8,"blankness"],[1,2834,214,20],[1,2837,215,6,"this"],[1,2842,215,11,"_anyBlankStartTime"],[1,2861,215,32,"now"],[1,2863,216,6,"this"],[1,2868,216,11,"_info"],[1,2874,216,17,"any_blank_speed_sum"],[1,2895,216,40,"scrollSpeed"],[1,2897,217,6,"this"],[1,2902,217,11,"_info"],[1,2908,217,17,"any_blank_count"],[1,2926,218,6,"this"],[1,2931,218,11,"_info"],[1,2937,218,17,"pixels_blank"],[1,2951,218,33,"pixels_blank"],[1,2953,219,10,"blankness"],[1,2955,219,22],[1,2960,220,8,"this"],[1,2965,220,13,"_mostlyBlankStartTime"],[1,2987,220,37,"now"],[1,2989,221,8,"this"],[1,2994,221,13,"_info"],[1,3000,221,19,"mostly_blank_count"],[1,3024,223,15,"scrollSpeed"],[1,3026,223,29],[1,3031,223,37,"Math"],[1,3036,223,42,"abs"],[1,3040,223,46,"dOffset"],[1,3043,223,57],[1,3047,224,6,"this"],[1,3052,224,11,"deactivateAndFlush"],[1,3073,226,11,"blankness"],[1,3109,230,4],[1,3116,230,11,"this"],[1,3121,230,16,"_enabled"],[1,3167,234,4,"this"],[1,3172,234,9,"_anyBlankStartTime"],[1,3191,234,30],[1,3196,235,4,"this"],[1,3201,235,9,"_info"],[1,3207,235,17],[1,3211,235,21,"Info"],[1,3213,236,4,"this"],[1,3218,236,9,"_mostlyBlankStartTime"],[1,3240,236,33],[1,3245,237,4,"this"],[1,3250,237,9,"_samplesStartTime"],[1,3268,237,29],[1,3283,241,0,"module"],[1,3285,241,7,"exports"],[1,3293,241,17,"FillRateHelper"]]},"type":"js/module"}]}
{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"@babel/runtime/regenerator","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/defineProperty","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/extends","data":{"isAsync":false}},{"name":"react-native","data":{"isAsync":false}},{"name":"./RestartManager","data":{"isAsync":false}},{"name":"./logging","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  var _regenerator = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/regenerator\"));\n\n  var _defineProperty2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/defineProperty\"));\n\n  var _extends2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[3], \"@babel/runtime/helpers/extends\"));\n\n  var _reactNative = _$$_REQUIRE(_dependencyMap[4], \"react-native\");\n\n  var _RestartManager = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[5], \"./RestartManager\"));\n\n  var _logging = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[6], \"./logging\"));\n\n  function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\n  function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n  module.exports = function (NativeCodePush) {\n    var remote = function remote(reportStatusDownload) {\n      return {\n        download: function download(downloadProgressCallback) {\n          var downloadProgressSubscription, codePushEventEmitter, updatePackageCopy, downloadedPackage;\n          return _regenerator.default.async(function download$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  if (this.downloadUrl) {\n                    _context.next = 2;\n                    break;\n                  }\n\n                  throw new Error(\"Cannot download an update without a download url\");\n\n                case 2:\n                  if (downloadProgressCallback) {\n                    codePushEventEmitter = new _reactNative.NativeEventEmitter(NativeCodePush);\n                    downloadProgressSubscription = codePushEventEmitter.addListener(\"CodePushDownloadProgress\", downloadProgressCallback);\n                  }\n\n                  _context.prev = 3;\n                  updatePackageCopy = (0, _extends2.default)({}, this);\n                  Object.keys(updatePackageCopy).forEach(function (key) {\n                    return typeof updatePackageCopy[key] === 'function' && delete updatePackageCopy[key];\n                  });\n                  _context.next = 8;\n                  return _regenerator.default.awrap(NativeCodePush.downloadUpdate(updatePackageCopy, !!downloadProgressCallback));\n\n                case 8:\n                  downloadedPackage = _context.sent;\n\n                  if (reportStatusDownload) {\n                    reportStatusDownload(this).catch(function (err) {\n                      (0, _logging.default)(\"Report download status failed: \" + err);\n                    });\n                  }\n\n                  return _context.abrupt(\"return\", _objectSpread({}, downloadedPackage, {}, local));\n\n                case 11:\n                  _context.prev = 11;\n                  downloadProgressSubscription && downloadProgressSubscription.remove();\n                  return _context.finish(11);\n\n                case 14:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, null, this, [[3,, 11, 14]]);\n        },\n        isPending: false\n      };\n    };\n\n    var local = {\n      install: function install() {\n        var installMode,\n            minimumBackgroundDuration,\n            updateInstalledCallback,\n            localPackage,\n            localPackageCopy,\n            _args2 = arguments;\n        return _regenerator.default.async(function install$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                installMode = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : NativeCodePush.codePushInstallModeOnNextRestart;\n                minimumBackgroundDuration = _args2.length > 1 && _args2[1] !== undefined ? _args2[1] : 0;\n                updateInstalledCallback = _args2.length > 2 ? _args2[2] : undefined;\n                localPackage = this;\n                localPackageCopy = (0, _extends2.default)({}, localPackage);\n                _context2.next = 7;\n                return _regenerator.default.awrap(NativeCodePush.installUpdate(localPackageCopy, installMode, minimumBackgroundDuration));\n\n              case 7:\n                updateInstalledCallback && updateInstalledCallback();\n\n                if (installMode == NativeCodePush.codePushInstallModeImmediate) {\n                  _RestartManager.default.restartApp(false);\n                } else {\n                  _RestartManager.default.clearPendingRestart();\n\n                  localPackage.isPending = true;\n                }\n\n              case 9:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, null, this);\n      },\n      isPending: false\n    };\n    return {\n      local: local,\n      remote: remote\n    };\n  };\n});","map":[[10,0,1,0],[12,0,2,0],[14,0,3,0],[20,0,8,0,"module"],[20,2,8,0,"module"],[20,8,8,6],[20,9,8,7,"exports"],[20,16,8,0],[20,19,8,17],[20,29,8,18,"NativeCodePush"],[20,43,8,17],[20,45,8,37],[21,0,9,2],[21,8,9,8,"remote"],[21,14,9,14],[21,17,9,17],[21,26,9,8,"remote"],[21,32,9,17],[21,33,9,18,"reportStatusDownload"],[21,53,9,17],[21,55,9,43],[22,0,10,4],[22,13,10,11],[23,0,11,12,"download"],[23,8,11,12,"download"],[23,16,10,11],[23,36,11,21,"downloadProgressCallback"],[23,60,10,11],[24,0,10,11],[25,0,10,11],[26,0,10,11],[27,0,10,11],[28,0,10,11],[29,0,10,11],[29,22,12,13],[29,27,12,18,"downloadUrl"],[29,38,10,11],[30,0,10,11],[31,0,10,11],[32,0,10,11],[34,0,10,11],[34,24,13,16],[34,28,13,20,"Error"],[34,33,13,16],[34,34,13,26],[34,84,13,16],[34,85,10,11],[36,0,10,11],[37,0,17,8],[37,22,17,12,"downloadProgressCallback"],[37,46,17,8],[37,48,17,38],[38,0,18,16,"codePushEventEmitter"],[38,20,18,16,"codePushEventEmitter"],[38,40,17,38],[38,43,18,39],[38,47,18,43,"NativeEventEmitter"],[38,78,18,39],[38,79,18,62,"NativeCodePush"],[38,93,18,39],[38,94,17,38],[39,0,20,10,"downloadProgressSubscription"],[39,20,20,10,"downloadProgressSubscription"],[39,48,20,38],[39,51,20,41,"codePushEventEmitter"],[39,71,20,61],[39,72,20,62,"addListener"],[39,83,20,41],[39,84,21,12],[39,110,20,41],[39,112,22,12,"downloadProgressCallback"],[39,136,20,41],[39,137,20,10],[40,0,24,9],[42,0,10,11],[43,0,29,16,"updatePackageCopy"],[43,18,29,16,"updatePackageCopy"],[43,35,10,11],[43,38,29,36],[43,61,29,50],[43,63,29,36],[43,65,29,54],[43,69,29,36],[43,70,10,11],[44,0,30,10,"Object"],[44,18,30,10,"Object"],[44,24,30,16],[44,25,30,17,"keys"],[44,29,30,10],[44,30,30,22,"updatePackageCopy"],[44,47,30,10],[44,49,30,41,"forEach"],[44,56,30,10],[44,57,30,49],[44,67,30,50,"key"],[44,70,30,49],[45,0,30,49],[45,27,30,59],[45,34,30,66,"updatePackageCopy"],[45,51,30,83],[45,52,30,84,"key"],[45,55,30,83],[45,56,30,59],[45,61,30,93],[45,71,30,58],[45,75,30,108],[45,82,30,115,"updatePackageCopy"],[45,99,30,132],[45,100,30,133,"key"],[45,103,30,132],[45,104,30,49],[46,0,30,49],[46,19,30,10],[47,0,10,11],[48,0,10,11],[48,52,32,42,"NativeCodePush"],[48,66,32,56],[48,67,32,57,"downloadUpdate"],[48,81,32,42],[48,82,32,72,"updatePackageCopy"],[48,99,32,42],[48,101,32,91],[48,102,32,92],[48,103,32,93,"downloadProgressCallback"],[48,127,32,42],[48,128,10,11],[50,0,10,11],[51,0,32,16,"downloadedPackage"],[51,18,32,16,"downloadedPackage"],[51,35,10,11],[53,0,34,10],[53,22,34,14,"reportStatusDownload"],[53,42,34,10],[53,44,34,36],[54,0,35,12,"reportStatusDownload"],[54,20,35,12,"reportStatusDownload"],[54,40,35,32],[54,41,35,33],[54,45,35,32],[54,46,35,12],[54,47,36,13,"catch"],[54,52,35,12],[54,53,36,19],[54,63,36,20,"err"],[54,66,36,19],[54,68,36,28],[55,0,37,14],[55,80,37,52,"err"],[55,83,37,14],[56,0,38,13],[56,21,35,12],[57,0,39,11],[59,0,10,11],[59,69,41,22,"downloadedPackage"],[59,86,10,11],[59,92,41,44,"local"],[59,97,10,11],[61,0,10,11],[62,0,10,11],[63,0,43,10,"downloadProgressSubscription"],[63,18,43,10,"downloadProgressSubscription"],[63,46,43,38],[63,50,43,42,"downloadProgressSubscription"],[63,78,43,70],[63,79,43,71,"remove"],[63,85,43,42],[63,87,43,10],[64,0,10,11],[66,0,10,11],[67,0,10,11],[68,0,10,11],[69,0,10,11],[70,0,10,11],[71,0,10,11],[72,0,10,11],[73,0,47,6,"isPending"],[73,8,47,6,"isPending"],[73,17,47,15],[73,19,47,17],[74,0,10,11],[74,7,10,4],[75,0,49,3],[75,5,9,2],[77,0,51,2],[77,8,51,8,"local"],[77,13,51,13],[77,16,51,16],[78,0,52,10,"install"],[78,6,52,10,"install"],[78,13,51,16],[79,0,51,16],[80,0,51,16],[81,0,51,16],[82,0,51,16],[83,0,51,16],[84,0,51,16],[85,0,51,16],[86,0,51,16],[87,0,51,16],[88,0,51,16],[89,0,52,18,"installMode"],[89,16,52,18,"installMode"],[89,27,51,16],[89,89,52,32,"NativeCodePush"],[89,103,52,46],[89,104,52,47,"codePushInstallModeOnNextRestart"],[89,136,51,16],[90,0,52,81,"minimumBackgroundDuration"],[90,16,52,81,"minimumBackgroundDuration"],[90,41,51,16],[90,103,52,109],[90,104,51,16],[91,0,52,112,"updateInstalledCallback"],[91,16,52,112,"updateInstalledCallback"],[91,39,51,16],[92,0,53,12,"localPackage"],[92,16,53,12,"localPackage"],[92,28,51,16],[92,31,53,27],[92,35,51,16],[93,0,54,12,"localPackageCopy"],[93,16,54,12,"localPackageCopy"],[93,32,51,16],[93,35,54,31],[93,58,54,45],[93,60,54,31],[93,62,54,49,"localPackage"],[93,74,54,31],[93,75,51,16],[94,0,51,16],[95,0,51,16],[95,50,55,12,"NativeCodePush"],[95,64,55,26],[95,65,55,27,"installUpdate"],[95,78,55,12],[95,79,55,41,"localPackageCopy"],[95,95,55,12],[95,97,55,59,"installMode"],[95,108,55,12],[95,110,55,72,"minimumBackgroundDuration"],[95,135,55,12],[95,136,51,16],[97,0,51,16],[98,0,56,6,"updateInstalledCallback"],[98,16,56,6,"updateInstalledCallback"],[98,39,56,29],[98,43,56,33,"updateInstalledCallback"],[98,66,56,56],[98,68,56,6],[100,0,57,6],[100,20,57,10,"installMode"],[100,31,57,21],[100,35,57,25,"NativeCodePush"],[100,49,57,39],[100,50,57,40,"codePushInstallModeImmediate"],[100,78,57,6],[100,80,57,70],[101,0,58,8,"RestartManager"],[101,42,58,23,"restartApp"],[101,52,58,8],[101,53,58,34],[101,58,58,8],[102,0,59,7],[102,17,57,6],[102,23,59,13],[103,0,60,8,"RestartManager"],[103,42,60,23,"clearPendingRestart"],[103,61,60,8],[105,0,61,8,"localPackage"],[105,18,61,8,"localPackage"],[105,30,61,20],[105,31,61,21,"isPending"],[105,40,61,8],[105,43,61,33],[105,47,61,8],[106,0,62,7],[108,0,51,16],[109,0,51,16],[110,0,51,16],[111,0,51,16],[112,0,51,16],[113,0,51,16],[114,0,51,16],[115,0,65,4,"isPending"],[115,6,65,4,"isPending"],[115,15,65,13],[115,17,65,15],[116,0,51,16],[116,5,51,2],[117,0,68,2],[117,11,68,9],[118,0,68,11,"local"],[118,6,68,11,"local"],[118,11,68,16],[118,13,68,11,"local"],[118,18,68,9],[119,0,68,18,"remote"],[119,6,68,18,"remote"],[119,12,68,24],[119,14,68,18,"remote"],[120,0,68,9],[120,5,68,2],[121,0,69,1],[121,3,8,0]]},"type":"js/module"}]}
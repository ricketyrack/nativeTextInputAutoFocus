{"dependencies":[{"name":"@babel/runtime/helpers/defineProperty","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"invariant","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),n=r(d[1]),o=r(d[2]),s=r(d[3]);function c(t,n){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);n&&(s=s.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),o.push.apply(o,s)}return o}function l(n){for(var o=1;o<arguments.length;o++){var s=null!=arguments[o]?arguments[o]:{};o%2?c(Object(s),!0).forEach(function(o){t(n,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(s,t))})}return n}var u=r(d[4]),f=(function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{viewAreaCoveragePercentThreshold:0};o(this,t),this._hasInteracted=!1,this._timers=new Set,this._viewableIndices=[],this._viewableItems=new Map,this._config=n}return s(t,[{key:\"dispose\",value:function(){this._timers.forEach(clearTimeout)}},{key:\"computeViewableItems\",value:function(t,n,o,s,c){var l=this._config,f=l.itemVisiblePercentThreshold,v=l.viewAreaCoveragePercentThreshold,b=null!=v,y=b?v:f;u(null!=y&&null!=f!=(null!=v),'Must set exactly one of itemVisiblePercentThreshold or viewAreaCoveragePercentThreshold');var p=[];if(0===t)return p;var w=-1,_=c||{first:0,last:t-1},I=_.first,O=_.last;if(O>=t)return console.warn('Invalid render range computing viewability '+JSON.stringify({renderRange:c,itemCount:t})),[];for(var k=I;k<=O;k++){var P=s(k);if(P){var j=P.offset-n,S=j+P.length;if(j<o&&S>0)w=k,h(b,y,j,S,o,P.length)&&p.push(k);else if(w>=0)break}}return p}},{key:\"onUpdate\",value:function(t,n,o,s,c,l,u){var f=this;if((!this._config.waitForInteraction||this._hasInteracted)&&0!==t&&s(0)){var h=[];if(t&&(h=this.computeViewableItems(t,n,o,s,u)),this._viewableIndices.length!==h.length||!this._viewableIndices.every(function(t,n){return t===h[n]}))if(this._viewableIndices=h,this._config.minimumViewTime){var v=setTimeout(function(){f._timers.delete(v),f._onUpdateSync(h,l,c)},this._config.minimumViewTime);this._timers.add(v)}else this._onUpdateSync(h,l,c)}}},{key:\"resetViewableIndices\",value:function(){this._viewableIndices=[]}},{key:\"recordInteraction\",value:function(){this._hasInteracted=!0}},{key:\"_onUpdateSync\",value:function(t,o,s){var c=this;t=t.filter(function(t){return c._viewableIndices.includes(t)});var u=this._viewableItems,f=new Map(t.map(function(t){var n=s(t,!0);return[n.key,n]})),h=[],v=f,b=Array.isArray(v),y=0;for(v=b?v:v[\"function\"==typeof Symbol?Symbol.iterator:\"@@iterator\"]();;){var p;if(b){if(y>=v.length)break;p=v[y++]}else{if((y=v.next()).done)break;p=y.value}var w=n(p,2),_=w[0],I=w[1];u.has(_)||h.push(I)}var O=u,k=Array.isArray(O),P=0;for(O=k?O:O[\"function\"==typeof Symbol?Symbol.iterator:\"@@iterator\"]();;){var j;if(k){if(P>=O.length)break;j=O[P++]}else{if((P=O.next()).done)break;j=P.value}var S=n(j,2),T=S[0],A=S[1];f.has(T)||h.push(l({},A,{isViewable:!1}))}h.length>0&&(this._viewableItems=f,o({viewableItems:Array.from(f.values()),changed:h,viewabilityConfig:this._config}))}}]),t})();function h(t,n,o,s,c,l){if(b(o,s,c))return!0;var u=v(o,s,c);return 100*(t?u/c:u/l)>=n}function v(t,n,o){var s=Math.min(n,o)-Math.max(t,0);return Math.max(0,s)}function b(t,n,o){return t>=0&&n<=o&&n>t}m.exports=f});","map":[[1,28,10,0],[1,654,12,0],[1,658,12,6,"invariant"],[1,660,12,18,"require"],[1,662,12,25,"d"],[1,664,12,25],[1,668,71,6,"ViewabilityHelper"],[1,682,81,2],[1,691,81,2,"ViewabilityHelper"],[1,695,83,4],[1,699,82,4,"config"],[1,701,83,4,"arguments"],[1,711,83,4,"length"],[1,718,83,4],[1,726,83,4,"undefined"],[1,730,83,4,"arguments"],[1,740,83,4],[1,743,83,4,"arguments"],[1,753,83,4],[1,757,82,33,"viewAreaCoveragePercentThreshold"],[1,790,82,67],[1,793,83,4,"_classCallCheck"],[1,795,83,4,"this"],[1,800,83,4,"ViewabilityHelper"],[1,803,83,4,"this"],[1,808,73,2,"_hasInteracted"],[1,824,73,28],[1,826,83,4,"this"],[1,831,77,2,"_timers"],[1,839,77,25],[1,843,77,29,"Set"],[1,847,83,4,"this"],[1,852,78,2,"_viewableIndices"],[1,872,83,4,"this"],[1,877,79,2,"_viewableItems"],[1,892,79,43],[1,896,79,47,"Map"],[1,900,84,4,"this"],[1,905,84,9,"_config"],[1,913,84,19,"config"],[1,959,91,4,"this"],[1,964,91,9,"_timers"],[1,972,91,17,"forEach"],[1,980,91,25,"clearTimeout"],[1,1039,98,4,"itemCount"],[1,1041,99,4,"scrollOffset"],[1,1043,100,4,"viewportHeight"],[1,1045,101,4,"getFrameMetrics"],[1,1047,102,4,"renderRange"],[1,1050,103,19],[1,1054,103,19,"_this$_config"],[1,1056,107,8,"this"],[1,1061,107,13,"_config"],[1,1069,105,6,"itemVisiblePercentThreshold"],[1,1071,103,19,"_this$_config"],[1,1073,105,6,"itemVisiblePercentThreshold"],[1,1101,106,6,"viewAreaCoveragePercentThreshold"],[1,1103,103,19,"_this$_config"],[1,1105,106,6,"viewAreaCoveragePercentThreshold"],[1,1138,108,10,"viewAreaMode"],[1,1140,108,61],[1,1146,108,25,"viewAreaCoveragePercentThreshold"],[1,1148,109,10,"viewablePercentThreshold"],[1,1150,109,37,"viewAreaMode"],[1,1152,110,8,"viewAreaCoveragePercentThreshold"],[1,1154,111,8,"itemVisiblePercentThreshold"],[1,1156,112,4,"invariant"],[1,1158,113,34],[1,1164,113,6,"viewablePercentThreshold"],[1,1167,114,40],[1,1173,114,9,"itemVisiblePercentThreshold"],[1,1177,115,47],[1,1183,115,11,"viewAreaCoveragePercentThreshold"],[1,1186,116,6],[1,1277,118,4],[1,1281,118,10,"viewableIndices"],[1,1286,119,4],[1,1289,119,22],[1,1293,119,8,"itemCount"],[1,1295,120,6],[1,1302,120,13,"viewableIndices"],[1,1304,122,4],[1,1308,122,8,"firstVisible"],[1,1311,122,20],[1,1313,103,19,"_ref"],[1,1315,123,26,"renderRange"],[1,1319,123,42,"first"],[1,1325,123,49],[1,1327,123,52,"last"],[1,1332,123,58,"itemCount"],[1,1334,123,70],[1,1337,123,11,"first"],[1,1339,103,19,"_ref"],[1,1341,123,11,"first"],[1,1347,123,18,"last"],[1,1349,103,19,"_ref"],[1,1351,123,18,"last"],[1,1356,124,4],[1,1359,124,8,"last"],[1,1362,124,16,"itemCount"],[1,1364,129,6],[1,1371,125,6,"console"],[1,1379,125,14,"warn"],[1,1384,126,8],[1,1430,127,10,"JSON"],[1,1435,127,15,"stringify"],[1,1446,127,26,"renderRange"],[1,1458,127,26,"renderRange"],[1,1460,127,39,"itemCount"],[1,1470,127,39,"itemCount"],[1,1478,131,4],[1,1482,131,9],[1,1486,131,13,"idx"],[1,1488,131,19,"first"],[1,1490,131,26,"idx"],[1,1493,131,33,"last"],[1,1495,131,39,"idx"],[1,1499,131,46],[1,1500,132,6],[1,1504,132,12,"metrics"],[1,1506,132,22,"getFrameMetrics"],[1,1508,132,38,"idx"],[1,1511,133,6],[1,1514,133,11,"metrics"],[1,1516,133,6],[1,1517,136,6],[1,1521,136,12,"top"],[1,1523,136,18,"metrics"],[1,1525,136,26,"offset"],[1,1532,136,35,"scrollOffset"],[1,1534,137,12,"bottom"],[1,1536,137,21,"top"],[1,1538,137,27,"metrics"],[1,1540,137,35,"length"],[1,1547,138,6],[1,1550,138,10,"top"],[1,1552,138,16,"viewportHeight"],[1,1555,138,34,"bottom"],[1,1557,138,43],[1,1559,139,8,"firstVisible"],[1,1561,139,23,"idx"],[1,1563,141,10,"_isViewable"],[1,1565,142,12,"viewAreaMode"],[1,1567,143,12,"viewablePercentThreshold"],[1,1569,144,12,"top"],[1,1571,145,12,"bottom"],[1,1573,146,12,"viewportHeight"],[1,1575,147,12,"metrics"],[1,1577,147,20,"length"],[1,1586,150,10,"viewableIndices"],[1,1588,150,26,"push"],[1,1593,150,31,"idx"],[1,1601,152,13],[1,1604,152,17,"firstVisible"],[1,1607,152,33],[1,1609,153,8],[1,1616,156,4],[1,1623,156,11,"viewableIndices"],[1,1658,164,4,"itemCount"],[1,1660,165,4,"scrollOffset"],[1,1662,166,4,"viewportHeight"],[1,1664,167,4,"getFrameMetrics"],[1,1666,168,4,"createViewToken"],[1,1668,169,4,"onViewableItemsChanged"],[1,1670,173,4,"renderRange"],[1,1673,174,10],[1,1677,174,10,"_this"],[1,1679,174,10,"this"],[1,1684,175,4],[1,1689,176,7,"this"],[1,1694,176,12,"_config"],[1,1702,176,20,"waitForInteraction"],[1,1722,176,43,"this"],[1,1727,176,48,"_hasInteracted"],[1,1744,177,20],[1,1748,177,6,"itemCount"],[1,1751,178,7,"getFrameMetrics"],[1,1753,178,23],[1,1756,175,4],[1,1757,182,4],[1,1761,182,8,"viewableIndices"],[1,1766,192,4],[1,1769,183,8,"itemCount"],[1,1773,184,6,"viewableIndices"],[1,1775,184,24,"this"],[1,1780,184,29,"computeViewableItems"],[1,1801,185,8,"itemCount"],[1,1803,186,8,"scrollOffset"],[1,1805,187,8,"viewportHeight"],[1,1807,188,8,"getFrameMetrics"],[1,1809,189,8,"renderRange"],[1,1813,193,6,"this"],[1,1818,193,11,"_viewableIndices"],[1,1835,193,28,"length"],[1,1844,193,39,"viewableIndices"],[1,1846,193,55,"length"],[1,1855,194,6,"this"],[1,1860,194,11,"_viewableIndices"],[1,1877,194,28,"every"],[1,1883,194,34],[1,1892,194,35,"v"],[1,1894,194,38,"ii"],[1,1897,194,34],[1,1904,194,45,"v"],[1,1908,194,51,"viewableIndices"],[1,1910,194,67,"ii"],[1,1915,201,4],[1,1918,200,4,"this"],[1,1923,200,9,"_viewableIndices"],[1,1940,200,28,"viewableIndices"],[1,1942,201,8,"this"],[1,1947,201,13,"_config"],[1,1955,201,21,"minimumViewTime"],[1,1971,201,38],[1,1972,202,6],[1,1976,202,12,"handle"],[1,1978,202,21,"setTimeout"],[1,1989,202,32],[1,2000,203,8,"_this"],[1,2002,203,13,"_timers"],[1,2010,203,21,"delete"],[1,2017,203,28,"handle"],[1,2020,204,8,"_this"],[1,2022,204,13,"_onUpdateSync"],[1,2036,205,10,"viewableIndices"],[1,2038,206,10,"onViewableItemsChanged"],[1,2040,207,10,"createViewToken"],[1,2044,209,9,"this"],[1,2049,209,14,"_config"],[1,2057,209,22,"minimumViewTime"],[1,2074,210,6,"this"],[1,2079,210,11,"_timers"],[1,2087,210,19,"add"],[1,2091,210,23,"handle"],[1,2099,212,6,"this"],[1,2104,212,11,"_onUpdateSync"],[1,2118,213,8,"viewableIndices"],[1,2120,214,8,"onViewableItemsChanged"],[1,2122,215,8,"createViewToken"],[1,2173,224,4,"this"],[1,2178,224,9,"_viewableIndices"],[1,2242,231,4,"this"],[1,2247,231,9,"_hasInteracted"],[1,2263,231,26],[1,2303,235,4,"viewableIndicesToCheck"],[1,2305,236,4,"onViewableItemsChanged"],[1,2307,237,4,"createViewToken"],[1,2310,238,4],[1,2314,238,4,"_this2"],[1,2316,238,4,"this"],[1,2321,240,4,"viewableIndicesToCheck"],[1,2323,240,29,"viewableIndicesToCheck"],[1,2325,240,52,"filter"],[1,2332,240,59],[1,2341,240,59,"ii"],[1,2344,240,61],[1,2351,241,6,"_this2"],[1,2353,241,11,"_viewableIndices"],[1,2370,241,28,"includes"],[1,2379,241,37,"ii"],[1,2384,243,4],[1,2388,243,10,"prevItems"],[1,2390,243,22,"this"],[1,2395,243,27,"_viewableItems"],[1,2410,244,10,"nextItems"],[1,2412,244,22],[1,2416,244,26,"Map"],[1,2420,245,6,"viewableIndicesToCheck"],[1,2422,245,29,"map"],[1,2426,245,33],[1,2435,245,33,"ii"],[1,2438,246,8],[1,2442,246,14,"viewable"],[1,2444,246,25,"createViewToken"],[1,2446,246,41,"ii"],[1,2449,246,45],[1,2452,247,8],[1,2459,247,16,"viewable"],[1,2461,247,25,"key"],[1,2465,247,30,"viewable"],[1,2471,251,10,"changed"],[1,2476,252,4,"_iterator"],[1,2478,252,34,"nextItems"],[1,2480,252,4,"_isArray"],[1,2482,252,4,"Array"],[1,2488,252,4,"isArray"],[1,2496,252,4,"_iterator"],[1,2499,252,4,"_i"],[1,2501,252,4],[1,2503,252,4],[1,2507,252,4,"_iterator"],[1,2509,252,4,"_isArray"],[1,2511,252,4,"_iterator"],[1,2513,252,4,"_iterator"],[1,2515,252,4],[1,2534,252,4,"Symbol"],[1,2541,252,4,"Symbol"],[1,2548,252,4,"iterator"],[1,2557,252,4],[1,2575,252,45],[1,2576,252,45],[1,2580,252,45,"_ref4"],[1,2582,252,45],[1,2585,252,45,"_isArray"],[1,2587,252,45],[1,2588,252,45],[1,2591,252,45,"_i"],[1,2594,252,45,"_iterator"],[1,2596,252,45,"length"],[1,2603,252,45],[1,2609,252,45,"_ref4"],[1,2611,252,45,"_iterator"],[1,2613,252,45,"_i"],[1,2622,252,45],[1,2623,252,45],[1,2627,252,45,"_i"],[1,2629,252,45,"_iterator"],[1,2631,252,45,"next"],[1,2639,252,45,"done"],[1,2644,252,45],[1,2650,252,45,"_ref4"],[1,2652,252,45,"_i"],[1,2654,252,45,"value"],[1,2660,252,45],[1,2664,252,45,"_ref3"],[1,2666,252,45,"_slicedToArray"],[1,2668,252,45,"_ref4"],[1,2670,252,45],[1,2673,252,16,"key"],[1,2675,252,45,"_ref3"],[1,2677,252,45],[1,2680,252,21,"viewable"],[1,2682,252,45,"_ref3"],[1,2684,252,45],[1,2687,253,11,"prevItems"],[1,2689,253,21,"has"],[1,2693,253,25,"key"],[1,2697,254,8,"changed"],[1,2699,254,16,"push"],[1,2704,254,21,"viewable"],[1,2707,257,4],[1,2711,257,4,"_iterator2"],[1,2713,257,34,"prevItems"],[1,2715,257,4,"_isArray2"],[1,2717,257,4,"Array"],[1,2723,257,4,"isArray"],[1,2731,257,4,"_iterator2"],[1,2734,257,4,"_i2"],[1,2736,257,4],[1,2738,257,4],[1,2742,257,4,"_iterator2"],[1,2744,257,4,"_isArray2"],[1,2746,257,4,"_iterator2"],[1,2748,257,4,"_iterator2"],[1,2750,257,4],[1,2769,257,4,"Symbol"],[1,2776,257,4,"Symbol"],[1,2783,257,4,"iterator"],[1,2792,257,4],[1,2810,257,45],[1,2811,257,45],[1,2815,257,45,"_ref7"],[1,2817,257,45],[1,2820,257,45,"_isArray2"],[1,2822,257,45],[1,2823,257,45],[1,2826,257,45,"_i2"],[1,2829,257,45,"_iterator2"],[1,2831,257,45,"length"],[1,2838,257,45],[1,2844,257,45,"_ref7"],[1,2846,257,45,"_iterator2"],[1,2848,257,45,"_i2"],[1,2857,257,45],[1,2858,257,45],[1,2862,257,45,"_i2"],[1,2864,257,45,"_iterator2"],[1,2866,257,45,"next"],[1,2874,257,45,"done"],[1,2879,257,45],[1,2885,257,45,"_ref7"],[1,2887,257,45,"_i2"],[1,2889,257,45,"value"],[1,2895,257,45],[1,2899,257,45,"_ref6"],[1,2901,257,45,"_slicedToArray"],[1,2903,257,45,"_ref7"],[1,2905,257,45],[1,2908,257,16,"key"],[1,2910,257,45,"_ref6"],[1,2912,257,45],[1,2915,257,21,"viewable"],[1,2917,257,45,"_ref6"],[1,2919,257,45],[1,2922,258,11,"nextItems"],[1,2924,258,21,"has"],[1,2928,258,25,"key"],[1,2932,259,8,"changed"],[1,2934,259,16,"push"],[1,2939,259,8,"_objectSpread"],[1,2944,259,25,"viewable"],[1,2947,259,35,"isViewable"],[1,2959,259,47],[1,2964,262,8,"changed"],[1,2966,262,16,"length"],[1,2973,262,25],[1,2977,263,6,"this"],[1,2982,263,11,"_viewableItems"],[1,2997,263,28,"nextItems"],[1,2999,264,6,"onViewableItemsChanged"],[1,3002,265,8,"viewableItems"],[1,3016,265,23,"Array"],[1,3022,265,29,"from"],[1,3027,265,34,"nextItems"],[1,3029,265,44,"values"],[1,3039,266,8,"changed"],[1,3047,266,8,"changed"],[1,3049,267,8,"viewabilityConfig"],[1,3067,267,27,"this"],[1,3072,267,32,"_config"],[1,3093,273,0],[1,3102,273,9,"_isViewable"],[1,3104,274,2,"viewAreaMode"],[1,3106,275,2,"viewablePercentThreshold"],[1,3108,276,2,"top"],[1,3110,277,2,"bottom"],[1,3112,278,2,"viewportHeight"],[1,3114,279,2,"itemLength"],[1,3117,281,2],[1,3120,281,6,"_isEntirelyVisible"],[1,3122,281,25,"top"],[1,3124,281,30,"bottom"],[1,3126,281,38,"viewportHeight"],[1,3129,282,4],[1,3136,282,11],[1,3138,284,4],[1,3142,284,10,"pixels"],[1,3144,284,19,"_getPixelsVisible"],[1,3146,284,37,"top"],[1,3148,284,42,"bottom"],[1,3150,284,50,"viewportHeight"],[1,3153,287,4],[1,3160,286,6],[1,3165,286,13,"viewAreaMode"],[1,3167,286,28,"pixels"],[1,3169,286,37,"viewportHeight"],[1,3171,286,54,"pixels"],[1,3173,286,63,"itemLength"],[1,3177,287,22,"viewablePercentThreshold"],[1,3179,291,0],[1,3188,291,9,"_getPixelsVisible"],[1,3190,292,2,"top"],[1,3192,293,2,"bottom"],[1,3194,294,2,"viewportHeight"],[1,3197,296,2],[1,3201,296,8,"visibleHeight"],[1,3203,296,24,"Math"],[1,3208,296,29,"min"],[1,3212,296,33,"bottom"],[1,3214,296,41,"viewportHeight"],[1,3217,296,59,"Math"],[1,3222,296,64,"max"],[1,3226,296,68,"top"],[1,3228,296,73],[1,3231,297,2],[1,3238,297,9,"Math"],[1,3243,297,14,"max"],[1,3247,297,18],[1,3249,297,21,"visibleHeight"],[1,3252,300,0],[1,3261,300,9,"_isEntirelyVisible"],[1,3263,301,2,"top"],[1,3265,302,2,"bottom"],[1,3267,303,2,"viewportHeight"],[1,3270,305,2],[1,3277,305,9,"top"],[1,3280,305,16],[1,3283,305,21,"bottom"],[1,3286,305,31,"viewportHeight"],[1,3289,305,49,"bottom"],[1,3291,305,58,"top"],[1,3293,308,0,"module"],[1,3295,308,7,"exports"],[1,3303,308,17,"ViewabilityHelper"]]},"type":"js/module"}]}